"use strict";function swapImages(e,t,a){clearTimeout(swapImagesTimer),swapImagesTimer=setInterval(()=>{updateSrcset(e,t[a]),a=(a+1)%t.length},1e3)}function updateSrcset(e,t){e.srcset=e.srcset.replace(/\/([^\/]+)\.webp/g,(e,a)=>e.replace(a,t))}function updatePrices(e,t,a){t&&(e.querySelector(".card-price__actual span").innerText=t),a&&(e.querySelector(".card-price__old span").innerText=a)}function updateLinks(e,t){e.querySelector(".product-card__body-link").href=t,e.querySelector(".product-card__head-link").href=t}function setActiveColor(e,t,a,s){e.forEach(e=>e.classList.toggle("card-color--active",e===t)),a.dataset.activeColorId=t.dataset.colorId,s.forEach(e=>{e.classList.toggle("card-size--showed",t.dataset.colorId===e.dataset.colorId)})}function setSwiper(e){let t=e.querySelector(".product-card__head-link"),a=e.querySelector(`[data-color-id="${e.dataset.activeColorId}"]`).dataset.images;if(a&&(a=a.replace(" ","").split(","),a.length>1)){let s=e.querySelector(".product-card__pic"),r=document.createElement("div");r.classList.add("product-card__swiper");const c=document.createDocumentFragment();for(let e=0;e<a.length;e++){let t=document.createElement("div");t.addEventListener("mouseover",()=>{updateSrcset(s,a[e])}),c.appendChild(t)}r.appendChild(c),t.append(r)}}function removeSwiper(e){let t=e.querySelector(".product-card__swiper");t&&t.remove()}function setProductDefaultState(e){let t=e.querySelectorAll(".card-color"),a=e.querySelector(".product-card__pic"),s=e.querySelectorAll(".card-size");clearTimeout(swapImagesTimer),updateSrcset(a,t[0].dataset.colorId),updatePrices(e,t[0].dataset.priceActual,t[0].dataset.priceOld),updateLinks(e,t[0].dataset.colorId),setActiveColor(t,t[0],e,s),removeSwiper(e)}function checkIsMobile(){let e=window.matchMedia||window.msMatchMedia;if(e){let t=e("(pointer:coarse)");return t.matches}return!1}function getRussainDeclension(e,t){let a;return a=1===t||t>20&&t%10==1?e[0]:t>=2&&t<=4||t>20&&t%10>=2&&t%10<=4?e[1]:e[2],a}function getWorktimeStatus(e){const t=(new Date).toLocaleString("en-US",{timeZone:"Europe/Moscow"}),a=new Date(t),s=a.getDay();let r=e.dataset.worktimeDays.replace(" ","").split(",").map(e=>parseInt(e)).sort(),c=r.find(e=>e>s)||r[0];const l=new Date,[o,i]=e.dataset.worktimeOpen.replace(" ","").split(":").map(e=>parseInt(e));l.setHours(o),l.setMinutes(i);const n=new Date;let d,g,u,p,[v,m]=e.dataset.worktimeClose.replace(" ","").split(":").map(e=>parseInt(e));if(n.setHours(v),n.setMinutes(m),r.includes(s)&&a>=l&&a<=n)u=Math.abs(n-a),p="Сейчас открыто, закроется через";else{const t=c>s?c-s:7-s+r[0],o=new Date;o.setDate(a.getDate()+t),o.setHours(l.getHours()),o.setMinutes(l.getMinutes()),u=Math.abs(o-a),p="Сейчас закрыто, откроется через",e.classList.add("is-close")}d=Math.floor(u/36e5),g=Math.floor(u%36e5/6e4),e.innerHTML=`${p} ${d>0?d+"&nbsp;"+getRussainDeclension(["час","часа","часов"],d):""}&nbsp;${g}&nbsp;${getRussainDeclension(["минуту","минуты","минут"],g)}`}const body=document.querySelector("body"),catalogNav=document.querySelector(".catalog-nav"),catalogBtn=document.querySelector(".catalog-btn");let productHoverTimer,swapImagesTimer,isFilterOpen=!1;const delegate=e=>t=>a=>a.target.matches(e)&&t(a),inputDelegate=delegate("input[type=text]");body.addEventListener("focusin",inputDelegate(e=>{e.target.classList.contains("filter-search__input")&&e.target.addEventListener("input",e=>{let t=e.target.closest(".filter"),a=t.querySelector(".filter-search__clear"),s=t.querySelectorAll(".filter-value"),r=t.querySelector(".filter-content");if(a.addEventListener("click",()=>{e.target.value="",a.classList.remove("is-active"),s.forEach(e=>e.closest(".filter-content__row").classList.remove("is-hidden")),r.classList.remove("is-noresults")}),e.target.value.length){let t=0;a.classList.add("is-active"),s.forEach(a=>{a.innerText.toLowerCase().includes(e.target.value.toLowerCase())?a.closest(".filter-content__row").classList.remove("is-hidden"):(a.closest(".filter-content__row").classList.add("is-hidden"),t+=1)}),r.classList.toggle("is-noresults",t==s.length)}else a.classList.remove("is-active"),s.forEach(e=>e.closest(".filter-content__row").classList.remove("is-hidden")),r.classList.remove("is-noresults")}),e.target.classList.contains("filter-range__input")&&e.target.addEventListener("blur",e=>{let t=parseInt(e.target.closest(".filter-range").dataset.rangeMin),a=parseInt(e.target.closest(".filter-range").dataset.rangeMax);e.target.value=parseInt(e.target.value.replace(/\D/gi,""))||0,"min"==e.target.dataset.range&&((e.target.value<t||e.target.value>a)&&(e.target.value=t),e.target.value!=t&&setTimeout(()=>{e.target.closest(".catalog-filter").dataset.activeFilterCount=""},150)),"max"==e.target.dataset.range&&(e.target.value<t+1&&(e.target.value=t+1),e.target.value>a&&(e.target.value=a),e.target.value!=a&&(e.target.closest(".catalog-filter").dataset.activeFilterCount=""))})})),window.addEventListener("click",e=>{if(e.target.classList.contains("accordion__title")&&e.target.closest(".accordion__item").classList.toggle("is-opened"),e.target.classList.contains("product-card__fav")&&(e.target.classList.contains("is-active")?e.target.classList.remove("is-active"):(e.target.classList.add("is-active"),e.target.innerHTML="<span></span>")),catalogNav.classList.contains("is-active")?e.target.closest(".catalog-nav__inner")||(body.classList.remove("is-dropdown-open"),catalogNav.classList.remove("is-active"),catalogBtn.classList.remove("is-active")):e.target.classList.contains("catalog-btn")&&(e.target.classList.add("is-active"),body.classList.add("is-dropdown-open"),catalogNav.classList.add("is-active")),e.target.dataset.hasOwnProperty("tabTarget")){let t=e.target.dataset.tabTarget,a=t.split("-")[0];a&&(tabs=document.querySelectorAll(`[data-tab-id*="${a}"]`),tabs&&tabs.forEach(e=>{e.classList.toggle("is-active",e.dataset.tabId==t)}))}if(e.target.classList.contains("sort-list__link")){let t=e.target.closest(".sort-list");e.target.classList.contains("is-active")?(e.preventDefault(),t.classList.toggle("is-active")):(t.classList.remove("is-active"),t.querySelectorAll(".sort-list__link").forEach(e=>e.classList.remove("is-active")),e.target.classList.add("is-active"))}if(e.target.classList.contains("card-color__more")&&(e.target.closest(".card-colors").classList.add("card-colors--show-all"),e.target.classList.add("is-hidden")),e.target.classList.contains("catalog-filter__more")&&(e.target.closest(".catalog-filters").classList.add("catalog-filters--show-all"),e.target.classList.add("is-hidden")),e.target.classList.contains("card-color")&&checkIsMobile()&&e.preventDefault(),e.target.classList.contains("card-size")){e.target.classList.toggle("card-size--active");let t=e.target.closest(".card-sizes").querySelectorAll(`.card-size--active[data-color-id="${e.target.dataset.colorId}"]`),a=e.target.closest(".product-card").querySelector(`.card-color[data-color-id="${e.target.dataset.colorId}"]`);a.classList.toggle("card-color--incart",t.length>0)}if(e.target.closest(".catalog-filter__content"))e.target.classList.contains("filter-controls__close")&&e.target.closest(".catalog-filter").classList.remove("is-active");else if(e.target.classList.contains("catalog-filter__title"))if(e.target.closest(".catalog-filter").classList.contains("is-active"))e.target.closest(".catalog-filter").classList.remove("is-active");else{let t=body.querySelector(".catalog-filter.is-active");t&&t.classList.remove("is-active"),e.target.closest(".catalog-filter").classList.add("is-active")}else{let e=body.querySelector(".catalog-filter.is-active");e&&e.classList.remove("is-active")}if(e.target.classList.contains("filter-checkbox")){let t=e.target.closest(".filter").querySelectorAll("input.filter-checkbox:checked");t.length?e.target.closest(".catalog-filter").dataset.activeFilterCount=t.length:delete e.target.closest(".catalog-filter").dataset.activeFilterCount}if(e.target.classList.contains("filter-controls__clear")){let t=e.target.closest(".filter").querySelectorAll("input.filter-checkbox:checked");t.length&&(t.forEach(e=>{e.checked=!1}),delete e.target.closest(".catalog-filter").dataset.activeFilterCount);let a=e.target.closest(".filter").querySelector(".filter-range");a&&(a.querySelector('.filter-range__input[data-range="min"]').value=a.dataset.rangeMin,a.querySelector('.filter-range__input[data-range="max"]').value=a.dataset.rangeMax,delete e.target.closest(".catalog-filter").dataset.activeFilterCount)}if(e.target.dataset.hasOwnProperty("action")){if("scroll"==e.target.dataset.action){let t;e.preventDefault(),e.target.getAttribute("href")?(t=e.target.getAttribute("href"),t=t.replace("#","")):t=e.target.dataset.scrollTarget,document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})}if("showmore-product-specs"==e.target.dataset.action){const t=document.querySelector(".product-specs");t.classList.add("is-active"),e.target.classList.add("is-hidden")}if("showmore-product-description"==e.target.dataset.action){const t=document.querySelector(".product__description");t.classList.add("is-active"),e.target.classList.add("is-hidden")}}}),window.addEventListener("mouseover",e=>{if(e.target.classList.contains("card-color")){let t=e.target,a=t.closest(".product-card"),s=a.querySelectorAll(".card-color"),r=a.querySelectorAll(".card-size"),c=a.querySelector(".product-card__pic"),l=t.dataset.images?t.dataset.images.split(","):[];clearTimeout(swapImagesTimer),removeSwiper(a),setActiveColor(s,t,a,r),updateSrcset(c,t.dataset.colorId),updatePrices(a,t.dataset.priceActual,t.dataset.priceOld),updateLinks(a,t.dataset.colorId),l.length>1&&swapImages(c,l,1),t.addEventListener("mouseleave",()=>{clearTimeout(swapImagesTimer)}),a.addEventListener("mouseleave",()=>{setProductDefaultState(a)})}e.target.classList.contains("product-card__head-link")&&(productHoverTimer=setTimeout(()=>{setSwiper(e.target.closest(".product-card"));let t=e.target.closest(".product-card");t.addEventListener("mouseleave",()=>{clearTimeout(productHoverTimer),setProductDefaultState(t)})},250))});const catalogTabMenus=document.querySelectorAll(".catalog-tab__menu");catalogTabMenus&&catalogTabMenus.forEach(e=>{let t=e.querySelectorAll("a");if(t.length>6){let a=document.createElement("button");a.classList.add("catalog-tab__more"),a.innerText=`${t.length-6}`,a.addEventListener("click",()=>{e.classList.toggle("catalog-tab__menu--show-all")}),e.append(a)}});const catalogTabTitles=document.querySelectorAll(".catalog-nav__titles li"),catalogTabs=document.querySelectorAll(".catalog-tab");catalogTabTitles&&catalogTabs&&catalogTabTitles.forEach(e=>{e.addEventListener("mouseenter",t=>{catalogTabTitles.forEach(e=>e.classList.remove("is-active")),e.classList.add("is-active"),catalogTabs.forEach(e=>{e.classList.toggle("is-active",e.dataset.tabId===t.target.dataset.tabTarget)})})});const worktimeEl=document.getElementById("js-worktime");worktimeEl&&getWorktimeStatus(worktimeEl);const productPlaceholdersEl=document.querySelector(".product-cards--placeholder");if(productPlaceholdersEl){let e=productPlaceholdersEl.querySelectorAll(".product-card");if(e.length){const t=document.createDocumentFragment();for(let a=0;a<7-e.length;a++){let e=document.createElement("div");e.classList.add("product-card-placeholder"),t.appendChild(e)}productPlaceholdersEl.appendChild(t)}}const swiperRecentProducts=new Swiper(".js-swiper-recent-products",{loop:!1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:2,breakpoints:{320:{slidesPerView:2,spaceBetween:15},400:{slidesPerView:2.5,spaceBetween:15},575:{slidesPerView:3.5,spaceBetween:15},750:{slidesPerView:4.5,spaceBetween:20},1000:{slidesPerView:5,spaceBetween:20},1100:{slidesPerView:5.5,spaceBetween:25},1300:{slidesPerView:7,spaceBetween:25},1600:{slidesPerView:7,spaceBetween:30}}});Fancybox.bind("[data-fancybox]",{});const swiperMainSlider=new Swiper(".js-swiper-main-slider",{loop:!0,spaceBetween:0,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:3e3}}),scrollToTopBtn=document.getElementById("scroll-to-top");if(scrollToTopBtn){let e;window.addEventListener("scroll",function(){e=window.scrollY/window.innerHeight,scrollToTopBtn.classList.toggle("is-active",e>1)})}