"use strict";function updateActiveFilterCount(e){let t=e.querySelectorAll("input.filter-checkbox:checked");t.length?e.dataset.activeFilterCount=t.length:delete e.dataset.activeFilterCount}function updateVisibilityActiveFiltersWrap(){let e=document.querySelector(".active-filters-wrap"),t=document.querySelectorAll(".catalog-filter[data-active-filter-count]");t.length?e.classList.remove("active-filters-wrap--hidden"):(e.classList.add("active-filters-wrap--hidden"),e.querySelectorAll(".active-filter").forEach(e=>e.remove()))}function setFilterRange(e,t,a){let s=document.querySelector(".active-filters-wrap"),r=document.createElement("button");r.classList.add("active-filter"),r.innerText=`${t}-${a}₽`,r.dataset.action="clear-filter",r.dataset.filterGroup=e,s.appendChild(r)}function toggleFilter(e,t,a){let s=document.querySelector(".active-filters-wrap"),r=document.getElementById(e),l=e.split("-")[0],c=document.querySelector(`.catalog-filter[data-filter-group="${l}"]`);if(c.querySelector(".filter-checkbox"))if(t){let t=document.createElement("button");t.classList.add("active-filter"),t.innerText=a,t.dataset.action="clear-filter",t.dataset.filterId=e,t.dataset.filterGroup=l,s.appendChild(t)}else r.checked=!1,document.querySelector(`.active-filter[data-filter-id="${e}"]`).remove();c.querySelector(".filter-range")&&document.querySelector(`.active-filter[data-filter-id="${e}"]`).remove(),updateActiveFilterCount(c),updateVisibilityActiveFiltersWrap()}function clearFilterGroup(e){let t=document.querySelector(`.catalog-filter[data-filter-group="${e}"]`),a=t.querySelectorAll("input.filter-checkbox:checked");if(a.length)a.forEach(e=>toggleFilter(e.id));else{let e=t.querySelector(".filter-range");e&&(e.querySelector('.filter-range__input[data-range="min"]').value=e.dataset.rangeMin,e.querySelector('.filter-range__input[data-range="max"]').value=e.dataset.rangeMax,delete t.dataset.activeFilterCount)}}function swapImages(e,t,a){clearTimeout(swapImagesTimer),swapImagesTimer=setInterval(()=>{updateSrcset(e,t[a]),a=(a+1)%t.length},1e3)}function updateSrcset(e,t){e.srcset=e.srcset.replace(/\/([^\/]+)\.webp/g,(e,a)=>e.replace(a,t))}function updatePrices(e,t,a){t&&(e.querySelector(".card-price__actual span").innerText=t),a&&(e.querySelector(".card-price__old span").innerText=a)}function updateLinks(e,t){e.querySelector(".product-card__body-link").href=t,e.querySelector(".product-card__head-link").href=t}function setActiveColor(e,t,a,s){e.forEach(e=>e.classList.toggle("card-color--active",e===t)),a.dataset.activeColorId=t.dataset.colorId,s.forEach(e=>{e.classList.toggle("card-size--showed",t.dataset.colorId===e.dataset.colorId)})}function setSwiper(e){let t=e.querySelector(".product-card__head-link"),a=e.querySelector(`[data-color-id="${e.dataset.activeColorId}"]`).dataset.images;if(a&&(a=a.replace(" ","").split(","),a.length>1)){let s=e.querySelector(".product-card__pic"),r=document.createElement("div");r.classList.add("product-card__swiper");const l=document.createDocumentFragment();for(let e=0;e<a.length;e++){let t=document.createElement("div");t.addEventListener("mouseover",()=>{updateSrcset(s,a[e])}),l.appendChild(t)}r.appendChild(l),t.append(r)}}function removeSwiper(e){let t=e.querySelector(".product-card__swiper");t&&t.remove()}function setProductDefaultState(e){let t=e.querySelectorAll(".card-color"),a=e.querySelector(".product-card__pic"),s=e.querySelectorAll(".card-size");clearTimeout(swapImagesTimer),updateSrcset(a,t[0].dataset.colorId),updatePrices(e,t[0].dataset.priceActual,t[0].dataset.priceOld),updateLinks(e,t[0].dataset.colorId),setActiveColor(t,t[0],e,s),removeSwiper(e)}function checkIsMobile(){let e=window.matchMedia||window.msMatchMedia;if(e){let t=e("(pointer:coarse)");return t.matches}return!1}function getRussainDeclension(e,t){let a;return a=1===t||t>20&&t%10==1?e[0]:t>=2&&t<=4||t>20&&t%10>=2&&t%10<=4?e[1]:e[2],a}function getWorktimeStatus(e){const t=(new Date).toLocaleString("en-US",{timeZone:"Europe/Moscow"}),a=new Date(t),s=a.getDay();let r=e.dataset.worktimeDays.replace(" ","").split(",").map(e=>parseInt(e)).sort(),l=r.find(e=>e>s)||r[0];const c=new Date,[i,o]=e.dataset.worktimeOpen.replace(" ","").split(":").map(e=>parseInt(e));c.setHours(i),c.setMinutes(o);const n=new Date;let d,u,g,p,[v,m]=e.dataset.worktimeClose.replace(" ","").split(":").map(e=>parseInt(e));if(n.setHours(v),n.setMinutes(m),r.includes(s)&&a>=c&&a<=n)g=Math.abs(n-a),p="Сейчас открыто, закроется через";else{const t=l>s?l-s:7-s+r[0],i=new Date;i.setDate(a.getDate()+t),i.setHours(c.getHours()),i.setMinutes(c.getMinutes()),g=Math.abs(i-a),p="Сейчас закрыто, откроется через",e.classList.add("is-close")}d=Math.floor(g/36e5),u=Math.floor(g%36e5/6e4),e.innerHTML=`${p} ${d>0?d+"&nbsp;"+getRussainDeclension(["час","часа","часов"],d):""}&nbsp;${u}&nbsp;${getRussainDeclension(["минуту","минуты","минут"],u)}`}const catalogTabMenus=document.querySelectorAll(".catalog-tab__menu");catalogTabMenus&&catalogTabMenus.forEach(e=>{let t=e.querySelectorAll("a");if(t.length>6){let a=document.createElement("button");a.classList.add("catalog-tab__more"),a.innerText=`${t.length-6}`,a.addEventListener("click",()=>{e.classList.toggle("catalog-tab__menu--show-all")}),e.append(a)}});const catalogTabTitles=document.querySelectorAll(".catalog-nav__titles li"),catalogTabs=document.querySelectorAll(".catalog-tab");catalogTabTitles&&catalogTabs&&catalogTabTitles.forEach(e=>{e.addEventListener("mouseenter",t=>{catalogTabTitles.forEach(e=>e.classList.remove("is-active")),e.classList.add("is-active"),catalogTabs.forEach(e=>{e.classList.toggle("is-active",e.dataset.tabId===t.target.dataset.tabTarget)})})});const body=document.querySelector("body"),catalogNav=document.querySelector(".catalog-nav"),catalogBtn=document.querySelector(".catalog-btn");let productHoverTimer,swapImagesTimer,isFilterOpen=!1;const delegate=e=>t=>a=>a.target.matches(e)&&t(a),inputDelegate=delegate("input[type=text]");body.addEventListener("focusin",inputDelegate(e=>{e.target.classList.contains("filter-search__input")&&e.target.addEventListener("input",e=>{let t=e.target.closest(".filter"),a=t.querySelector(".filter-search__clear"),s=t.querySelectorAll(".filter-value"),r=t.querySelector(".filter-content");if(a.addEventListener("click",()=>{e.target.value="",a.classList.remove("is-active"),s.forEach(e=>e.closest(".filter-content__row").classList.remove("is-hidden")),r.classList.remove("is-noresults")}),e.target.value.length){let t=0;a.classList.add("is-active"),s.forEach(a=>{a.innerText.toLowerCase().includes(e.target.value.toLowerCase())?a.closest(".filter-content__row").classList.remove("is-hidden"):(a.closest(".filter-content__row").classList.add("is-hidden"),t+=1)}),r.classList.toggle("is-noresults",t==s.length)}else a.classList.remove("is-active"),s.forEach(e=>e.closest(".filter-content__row").classList.remove("is-hidden")),r.classList.remove("is-noresults")}),e.target.classList.contains("filter-range__input")&&e.target.addEventListener("blur",e=>{let t=parseInt(e.target.closest(".filter-range").dataset.rangeMin),a=parseInt(e.target.closest(".filter-range").dataset.rangeMax);e.target.value=parseInt(e.target.value.replace(/\D/gi,""))||0;let s=e.target.closest(".catalog-filter");"min"==e.target.dataset.range&&((e.target.value<t||e.target.value>a)&&(e.target.value=t),e.target.value!=t&&(setTimeout(()=>{s.dataset.activeFilterCount=""},150),setFilterRange(s.dataset.filterGroup,e.target.value,a))),"max"==e.target.dataset.range&&(e.target.value<t+1&&(e.target.value=t+1),e.target.value>a&&(e.target.value=a),e.target.value!=a&&(e.target.closest(".catalog-filter").dataset.activeFilterCount="",setFilterRange(s.dataset.filterGroup,t,e.target.value)))})})),window.addEventListener("click",e=>{if(e.target.classList.contains("accordion__title")&&e.target.closest(".accordion__item").classList.toggle("is-opened"),e.target.classList.contains("product-card__fav")&&(e.target.classList.contains("is-active")?e.target.classList.remove("is-active"):(e.target.classList.add("is-active"),e.target.innerHTML="<span></span>")),catalogNav.classList.contains("is-active")?e.target.closest(".catalog-nav__inner")||(body.classList.remove("is-dropdown-open"),catalogNav.classList.remove("is-active"),catalogBtn.classList.remove("is-active")):e.target.classList.contains("catalog-btn")&&(e.target.classList.add("is-active"),body.classList.add("is-dropdown-open"),catalogNav.classList.add("is-active")),e.target.dataset.hasOwnProperty("tabTarget")){let t=e.target.dataset.tabTarget,a=t.split("-")[0];if(a){let e=document.querySelectorAll(`[data-tab-id*="${a}"]`);e&&e.forEach(e=>{e.classList.toggle("is-active",e.dataset.tabId==t)})}}if(e.target.classList.contains("sort-list__link")){let t=e.target.closest(".sort-list");e.target.classList.contains("is-active")?(e.preventDefault(),t.classList.toggle("is-active")):(t.classList.remove("is-active"),t.querySelectorAll(".sort-list__link").forEach(e=>e.classList.remove("is-active")),e.target.classList.add("is-active"))}if(e.target.classList.contains("card-color__more")&&(e.target.closest(".card-colors").classList.add("card-colors--show-all"),e.target.classList.add("is-hidden")),e.target.classList.contains("catalog-filter__more")&&(e.target.closest(".catalog-filters").classList.add("catalog-filters--show-all"),e.target.classList.add("is-hidden")),e.target.classList.contains("card-color")&&checkIsMobile()&&e.preventDefault(),e.target.classList.contains("card-size")){e.target.classList.toggle("card-size--active");let t=e.target.closest(".card-sizes").querySelectorAll(`.card-size--active[data-color-id="${e.target.dataset.colorId}"]`),a=e.target.closest(".product-card").querySelector(`.card-color[data-color-id="${e.target.dataset.colorId}"]`);a.classList.toggle("card-color--incart",t.length>0)}if(e.target.closest(".catalog-filter__content"))"close-filter"==e.target.dataset.action&&e.target.closest(".catalog-filter").classList.remove("is-active");else if(e.target.classList.contains("catalog-filter__title"))if(e.target.closest(".catalog-filter").classList.contains("is-active"))e.target.closest(".catalog-filter").classList.remove("is-active");else{let t=body.querySelector(".catalog-filter.is-active");t&&t.classList.remove("is-active"),e.target.closest(".catalog-filter").classList.add("is-active")}else{let e=body.querySelector(".catalog-filter.is-active");e&&e.classList.remove("is-active")}if(e.target.classList.contains("filter-checkbox")){let t=e.target.closest(".filter-content__row").querySelector(".filter-value").innerText;toggleFilter(e.target.id,e.target.checked,t),updateActiveFilterCount(e.target.closest(".catalog-filter")),updateVisibilityActiveFiltersWrap()}if(e.target.dataset.hasOwnProperty("action")){if(e.target.dataset.action.includes("scroll")){let t;e.preventDefault(),e.target.getAttribute("href")?(t=e.target.getAttribute("href"),t=t.replace("#","")):t=e.target.dataset.scrollTarget,document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})}if(e.target.dataset.action.includes("showmore-product-specs")){const t=document.querySelector(".product-specs");t.classList.add("is-active"),e.target.classList.add("is-hidden")}if(e.target.dataset.action.includes("showmore-product-description")){const t=document.querySelector(".product__description");t.classList.add("is-active"),e.target.classList.add("is-hidden")}if(e.target.dataset.action.includes("set-customer-status")){let t=document.querySelectorAll(".register-card");t.forEach(e=>{e.classList.remove("register-card--active")}),e.target.closest(".register-card").classList.add("register-card--active"),document.querySelector("[data-customer-status-title-target]").innerText=e.target.dataset.customerStatusTitle,document.querySelector("[data-customer-status-minsumm-target]").innerText=e.target.dataset.customerStatusMinsumm;let a=document.querySelector("[data-customer-inn]");"3"==e.target.dataset.customerStatusId?a.classList.remove("d-none"):a.classList.add("d-none")}if("clear-filters"==e.target.dataset.action){let e=document.querySelectorAll(".catalog-filter");e.forEach(e=>{e.querySelectorAll("input.filter-checkbox").forEach(e=>e.checked=!1),updateActiveFilterCount(e),updateVisibilityActiveFiltersWrap()})}"clear-filter-group"==e.target.dataset.action&&clearFilterGroup(e.target.dataset.filterGroup),"clear-filter"==e.target.dataset.action&&toggleFilter(e.target.dataset.filterId),"toggle-password"==e.target.dataset.action&&(e.target.classList.toggle("is-active"),e.target.closest(".form-field").querySelector("input.form-field__password").type=e.target.classList.contains("is-active")?"text":"password")}}),window.addEventListener("mouseover",e=>{if(e.target.classList.contains("card-color")){let t=e.target,a=t.closest(".product-card"),s=a.querySelectorAll(".card-color"),r=a.querySelectorAll(".card-size"),l=a.querySelector(".product-card__pic"),c=t.dataset.images?t.dataset.images.split(","):[];clearTimeout(swapImagesTimer),removeSwiper(a),setActiveColor(s,t,a,r),updateSrcset(l,t.dataset.colorId),updatePrices(a,t.dataset.priceActual,t.dataset.priceOld),updateLinks(a,t.dataset.colorId),c.length>1&&swapImages(l,c,1),t.addEventListener("mouseleave",()=>{clearTimeout(swapImagesTimer)}),a.addEventListener("mouseleave",()=>{setProductDefaultState(a)})}e.target.classList.contains("product-card__head-link")&&(productHoverTimer=setTimeout(()=>{setSwiper(e.target.closest(".product-card"));let t=e.target.closest(".product-card");t.addEventListener("mouseleave",()=>{clearTimeout(productHoverTimer),setProductDefaultState(t)})},250)),e.target.classList.contains("notice-card--active")&&e.target.classList.remove("notice-card--active")});const productPlaceholdersEl=document.querySelector(".product-cards--placeholder");if(productPlaceholdersEl){let e=productPlaceholdersEl.querySelectorAll(".product-card");if(e.length){const t=document.createDocumentFragment();for(let a=0;a<7-e.length;a++){let e=document.createElement("div");e.classList.add("product-card-placeholder"),t.appendChild(e)}productPlaceholdersEl.appendChild(t)}}Fancybox.bind("[data-fancybox]",{l10n:{CLOSE:"Закрыть",NEXT:"Вперед",PREV:"Назад",MODAL:"Можно закрыть, нажав ESC",ERROR:"Ошибка",IMAGE_ERROR:"Изображение не найдено",ELEMENT_NOT_FOUND:"HTML не найден",AJAX_NOT_FOUND:"Ошибка при загрузке AJAX: Контент не найден",AJAX_FORBIDDEN:"Ошибка при загрузке AJAX: Запрещено",IFRAME_ERROR:"Ошибка при загрузке"}});const scrollToTopBtn=document.getElementById("scroll-to-top");if(scrollToTopBtn){let e;window.addEventListener("scroll",function(){e=window.scrollY/window.innerHeight,scrollToTopBtn.classList.toggle("is-active",e>1)})}const swiperRecentProducts=new Swiper(".js-swiper-recent-products",{loop:!1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:2,breakpoints:{320:{slidesPerView:2,spaceBetween:15},400:{slidesPerView:2.5,spaceBetween:15},575:{slidesPerView:3.5,spaceBetween:15},750:{slidesPerView:4.5,spaceBetween:20},1000:{slidesPerView:5,spaceBetween:20},1100:{slidesPerView:5.5,spaceBetween:25},1300:{slidesPerView:7,spaceBetween:25},1600:{slidesPerView:7,spaceBetween:30}}}),swiperMainSlider=new Swiper(".js-swiper-main-slider",{loop:!0,spaceBetween:0,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},a11y:{prevSlideMessage:"Назад",nextSlideMessage:"Вперёд"},autoplay:{delay:5e3},autoHeight:!0}),worktimeEl=document.getElementById("js-worktime");worktimeEl&&(getWorktimeStatus(worktimeEl),setInterval(()=>getWorktimeStatus(worktimeEl),2e3));