"use strict";function updateCartProductSizeCount(t){let e=t.querySelector(".cart-product-size__price"),a=parseFloat(e.innerText.match(/\d+,\d+/)[0].replace(",",".")),r=t.querySelector(".cart-product-count__input"),s=parseInt(r.value),c=a*s,l=t.querySelector(".cart-product-size__total"),i=t.querySelector(".cart-product-count__btn--minus"),o=t.querySelector(".cart-product-count__btn--plus");s>0?(t.classList.remove("cart-product-size--not-added"),l.innerText=c.toLocaleString("ru-RU",{style:"currency",currency:"RUB"}),i.classList.remove("is-disabled")):(l.innerText="",t.classList.add("cart-product-size--not-added"),i.classList.add("is-disabled")),999==s?o.classList.add("is-disabled"):o.classList.remove("is-disabled"),updateCartProductTotalCount(t)}function updateCartProductTotalCount(t){let e=t.closest(".cart-product__sizes"),a=e.querySelectorAll(".cart-product-size:not(.cart-product-size--not-added)");a.length>0?e.classList.remove("cart-product__sizes--empty"):e.classList.add("cart-product__sizes--empty")}function updateActiveFilterCount(t){let e=t.querySelectorAll("input.filter-checkbox:checked");e.length?t.dataset.activeFilterCount=e.length:delete t.dataset.activeFilterCount}function updateVisibilityActiveFiltersWrap(){let t=document.querySelector(".active-filters-wrap"),e=document.querySelectorAll(".catalog-filter[data-active-filter-count]");e.length?t.classList.remove("active-filters-wrap--hidden"):(t.classList.add("active-filters-wrap--hidden"),t.querySelectorAll(".active-filter").forEach(t=>t.remove()))}function setFilterRange(t,e,a){let r=document.querySelector(".active-filters-wrap"),s=document.createElement("button");s.classList.add("active-filter"),s.innerText=`${e}-${a}₽`,s.dataset.action="clear-filter",s.dataset.filterGroup=t,r.appendChild(s)}function toggleFilter(t,e,a){let r=document.querySelector(".active-filters-wrap"),s=document.getElementById(t),c=t.split("-")[0],l=document.querySelector(`.catalog-filter[data-filter-group="${c}"]`);if(l.querySelector(".filter-checkbox"))if(e){let e=document.createElement("button");e.classList.add("active-filter"),e.innerText=a,e.dataset.action="clear-filter",e.dataset.filterId=t,e.dataset.filterGroup=c,r.appendChild(e)}else s.checked=!1,document.querySelector(`.active-filter[data-filter-id="${t}"]`).remove();l.querySelector(".filter-range")&&document.querySelector(`.active-filter[data-filter-id="${t}"]`).remove(),updateActiveFilterCount(l),updateVisibilityActiveFiltersWrap()}function clearFilterGroup(t){let e=document.querySelector(`.catalog-filter[data-filter-group="${t}"]`),a=e.querySelectorAll("input.filter-checkbox:checked");if(a.length)a.forEach(t=>toggleFilter(t.id));else{let t=e.querySelector(".filter-range");t&&(t.querySelector('.filter-range__input[data-range="min"]').value=t.dataset.rangeMin,t.querySelector('.filter-range__input[data-range="max"]').value=t.dataset.rangeMax,delete e.dataset.activeFilterCount)}}function swapImages(t,e,a){clearTimeout(swapImagesTimer),swapImagesTimer=setInterval(()=>{updateSrcset(t,e[a]),a=(a+1)%e.length},1e3)}function updateSrcset(t,e){t.srcset=t.srcset.replace(/\/([^\/]+)\.webp/g,(t,a)=>t.replace(a,e))}function updatePrices(t,e,a){e&&(t.querySelector(".card-price__actual span").innerText=e),a&&(t.querySelector(".card-price__old span").innerText=a)}function updateLinks(t,e){t.querySelector(".product-card__body-link").href=e,t.querySelector(".product-card__head-link").href=e}function setActiveColor(t,e,a,r){t.forEach(t=>t.classList.toggle("card-color--active",t===e)),a.dataset.activeColorId=e.dataset.colorId,r.forEach(t=>{t.classList.toggle("card-size--showed",e.dataset.colorId===t.dataset.colorId)})}function setSwiper(t){let e=t.querySelector(".product-card__head-link"),a=t.querySelector(`[data-color-id="${t.dataset.activeColorId}"]`).dataset.images;if(a&&(a=a.replace(" ","").split(","),a.length>1)){let r=t.querySelector(".product-card__pic"),s=document.createElement("div");s.classList.add("product-card__swiper");const c=document.createDocumentFragment();for(let t=0;t<a.length;t++){let e=document.createElement("div");e.addEventListener("mouseover",()=>{updateSrcset(r,a[t])}),c.appendChild(e)}s.appendChild(c),e.append(s)}}function removeSwiper(t){let e=t.querySelector(".product-card__swiper");e&&e.remove()}function setProductDefaultState(t){let e=t.querySelectorAll(".card-color"),a=t.querySelector(".product-card__pic"),r=t.querySelectorAll(".card-size");clearTimeout(swapImagesTimer),updateSrcset(a,e[0].dataset.colorId),updatePrices(t,e[0].dataset.priceActual,e[0].dataset.priceOld),updateLinks(t,e[0].dataset.colorId),setActiveColor(e,e[0],t,r),removeSwiper(t)}function checkIsMobile(){let t=window.matchMedia||window.msMatchMedia;if(t){let e=t("(pointer:coarse)");return e.matches}return!1}function getRussainDeclension(t,e){let a;return a=1===e||e>20&&e%10==1?t[0]:e>=2&&e<=4||e>20&&e%10>=2&&e%10<=4?t[1]:t[2],a}function getWorktimeStatus(t){const e=(new Date).toLocaleString("en-US",{timeZone:"Europe/Moscow"}),a=new Date(e),r=a.getDay();let s=t.dataset.worktimeDays.replace(" ","").split(",").map(t=>parseInt(t)).sort(),c=s.find(t=>t>r)||s[0];const l=new Date,[i,o]=t.dataset.worktimeOpen.replace(" ","").split(":").map(t=>parseInt(t));l.setHours(i),l.setMinutes(o);const d=new Date;let n,u,g,p,[v,m]=t.dataset.worktimeClose.replace(" ","").split(":").map(t=>parseInt(t));if(d.setHours(v),d.setMinutes(m),s.includes(r)&&a>=l&&a<=d)g=Math.abs(d-a),p="Сейчас открыто, закроется через";else{const e=c>r?c-r:7-r+s[0],i=new Date;i.setDate(a.getDate()+e),i.setHours(l.getHours()),i.setMinutes(l.getMinutes()),g=Math.abs(i-a),p="Сейчас закрыто, откроется через",t.classList.add("is-close")}n=Math.floor(g/36e5),u=Math.floor(g%36e5/6e4),t.innerHTML=`${p} ${n>0?n+"&nbsp;"+getRussainDeclension(["час","часа","часов"],n):""}&nbsp;${u}&nbsp;${getRussainDeclension(["минуту","минуты","минут"],u)}`}let countInputs=document.querySelectorAll(".cart-product-count__input");countInputs&&countInputs.forEach(t=>{t.addEventListener("input",t=>{let e=parseInt(t.target.value);isNaN(e)?t.target.value="0":t.target.value=e.toString()}),t.addEventListener("blur",t=>{updateCartProductSizeCount(t.target.closest(".cart-product-size"))})});const catalogTabMenus=document.querySelectorAll(".catalog-tab__menu");catalogTabMenus&&catalogTabMenus.forEach(t=>{let e=t.querySelectorAll("a");if(e.length>6){let a=document.createElement("button");a.classList.add("catalog-tab__more"),a.innerText=`${e.length-6}`,a.addEventListener("click",()=>{t.classList.toggle("catalog-tab__menu--show-all")}),t.append(a)}});const catalogTabTitles=document.querySelectorAll(".catalog-nav__titles li"),catalogTabs=document.querySelectorAll(".catalog-tab");catalogTabTitles&&catalogTabs&&catalogTabTitles.forEach(t=>{t.addEventListener("mouseenter",e=>{catalogTabTitles.forEach(t=>t.classList.remove("is-active")),t.classList.add("is-active"),catalogTabs.forEach(t=>{t.classList.toggle("is-active",t.dataset.tabId===e.target.dataset.tabTarget)})})}),Fancybox.bind("[data-fancybox]",{l10n:{CLOSE:"Закрыть",NEXT:"Вперед",PREV:"Назад",MODAL:"Можно закрыть, нажав ESC",ERROR:"Ошибка",IMAGE_ERROR:"Изображение не найдено",ELEMENT_NOT_FOUND:"HTML не найден",AJAX_NOT_FOUND:"Ошибка при загрузке AJAX: Контент не найден",AJAX_FORBIDDEN:"Ошибка при загрузке AJAX: Запрещено",IFRAME_ERROR:"Ошибка при загрузке"}});const body=document.querySelector("body"),catalogNav=document.querySelector(".catalog-nav"),catalogBtn=document.querySelector(".catalog-btn");let productHoverTimer,swapImagesTimer,isFilterOpen=!1;const delegate=t=>e=>a=>a.target.matches(t)&&e(a),inputDelegate=delegate("input[type=text]");body.addEventListener("focusin",inputDelegate(t=>{t.target.classList.contains("filter-search__input")&&t.target.addEventListener("input",t=>{let e=t.target.closest(".filter"),a=e.querySelector(".filter-search__clear"),r=e.querySelectorAll(".filter-value"),s=e.querySelector(".filter-content");if(a.addEventListener("click",()=>{t.target.value="",a.classList.remove("is-active"),r.forEach(t=>t.closest(".filter-content__row").classList.remove("is-hidden")),s.classList.remove("is-noresults")}),t.target.value.length){let e=0;a.classList.add("is-active"),r.forEach(a=>{a.innerText.toLowerCase().includes(t.target.value.toLowerCase())?a.closest(".filter-content__row").classList.remove("is-hidden"):(a.closest(".filter-content__row").classList.add("is-hidden"),e+=1)}),s.classList.toggle("is-noresults",e==r.length)}else a.classList.remove("is-active"),r.forEach(t=>t.closest(".filter-content__row").classList.remove("is-hidden")),s.classList.remove("is-noresults")}),t.target.classList.contains("filter-range__input")&&t.target.addEventListener("blur",t=>{let e=parseInt(t.target.closest(".filter-range").dataset.rangeMin),a=parseInt(t.target.closest(".filter-range").dataset.rangeMax);t.target.value=parseInt(t.target.value.replace(/\D/gi,""))||0;let r=t.target.closest(".catalog-filter");"min"==t.target.dataset.range&&((t.target.value<e||t.target.value>a)&&(t.target.value=e),t.target.value!=e&&(setTimeout(()=>{r.dataset.activeFilterCount=""},150),setFilterRange(r.dataset.filterGroup,t.target.value,a))),"max"==t.target.dataset.range&&(t.target.value<e+1&&(t.target.value=e+1),t.target.value>a&&(t.target.value=a),t.target.value!=a&&(t.target.closest(".catalog-filter").dataset.activeFilterCount="",setFilterRange(r.dataset.filterGroup,e,t.target.value)))})})),window.addEventListener("click",t=>{if(t.target.classList.contains("accordion__title")&&t.target.closest(".accordion__item").classList.toggle("is-opened"),catalogNav.classList.contains("is-active")?t.target.closest(".catalog-nav__inner")||(body.classList.remove("is-dropdown-open"),catalogNav.classList.remove("is-active"),catalogBtn.classList.remove("is-active")):t.target.classList.contains("catalog-btn")&&(t.target.classList.add("is-active"),body.classList.add("is-dropdown-open"),catalogNav.classList.add("is-active")),t.target.dataset.hasOwnProperty("tabTarget")){let e=t.target.dataset.tabTarget,a=e.split("-")[0];if(a){let t=document.querySelectorAll(`[data-tab-id*="${a}"]`);t&&t.forEach(t=>{t.classList.toggle("is-active",t.dataset.tabId==e)})}}if(t.target.classList.contains("sort-list__link")){let e=t.target.closest(".sort-list");t.target.classList.contains("is-active")?(t.preventDefault(),e.classList.toggle("is-active")):(e.classList.remove("is-active"),e.querySelectorAll(".sort-list__link").forEach(t=>t.classList.remove("is-active")),t.target.classList.add("is-active"))}if(t.target.classList.contains("card-color__more")&&(t.target.closest(".card-colors").classList.add("card-colors--show-all"),t.target.classList.add("is-hidden")),t.target.classList.contains("catalog-filter__more")&&(t.target.closest(".catalog-filters").classList.add("catalog-filters--show-all"),t.target.classList.add("is-hidden")),t.target.classList.contains("card-color")&&checkIsMobile()&&t.preventDefault(),t.target.classList.contains("card-size")){t.target.classList.toggle("card-size--active");let e=t.target.closest(".card-sizes").querySelectorAll(`.card-size--active[data-color-id="${t.target.dataset.colorId}"]`),a=t.target.closest(".product-card").querySelector(`.card-color[data-color-id="${t.target.dataset.colorId}"]`);a.classList.toggle("card-color--incart",e.length>0)}if(t.target.closest(".catalog-filter__content"))"close-filter"==t.target.dataset.action&&t.target.closest(".catalog-filter").classList.remove("is-active");else if(t.target.classList.contains("catalog-filter__title"))if(t.target.closest(".catalog-filter").classList.contains("is-active"))t.target.closest(".catalog-filter").classList.remove("is-active");else{let e=body.querySelector(".catalog-filter.is-active");e&&e.classList.remove("is-active"),t.target.closest(".catalog-filter").classList.add("is-active")}else{let t=body.querySelector(".catalog-filter.is-active");t&&t.classList.remove("is-active")}if(t.target.classList.contains("filter-checkbox")){let e=t.target.closest(".filter-content__row").querySelector(".filter-value").innerText;toggleFilter(t.target.id,t.target.checked,e),updateActiveFilterCount(t.target.closest(".catalog-filter")),updateVisibilityActiveFiltersWrap()}if(t.target.dataset.hasOwnProperty("action")){if("toggle-favorites"==t.target.dataset.action&&(t.target.classList.contains("is-active")?t.target.classList.remove("is-active"):(t.target.classList.add("is-active"),t.target.innerHTML="<span></span>")),t.target.dataset.action.includes("scroll")){let e;t.preventDefault(),t.target.dataset.scrollTarget?e=t.target.dataset.scrollTarget:t.target.getAttribute("href")&&(e=t.target.getAttribute("href").replace("#","")),console.log(e),document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})}if(t.target.dataset.action.includes("showmore-product-specs")){const e=document.querySelector(".product-specs");e.classList.add("is-active"),t.target.classList.add("is-hidden")}if(t.target.dataset.action.includes("showmore-product-description")){const e=document.querySelector(".product__description");e.classList.add("is-active"),t.target.classList.add("is-hidden")}if(t.target.dataset.action.includes("set-customer-status")){let e=document.querySelectorAll(".register-card");e.forEach(t=>{t.classList.remove("register-card--active")}),t.target.closest(".register-card").classList.add("register-card--active"),document.querySelector("[data-customer-status-title-target]").innerText=t.target.dataset.customerStatusTitle,document.querySelector("[data-customer-status-minsumm-target]").innerText=t.target.dataset.customerStatusMinsumm;let a=document.querySelector("[data-customer-inn]");"3"==t.target.dataset.customerStatusId?a.classList.remove("d-none"):a.classList.add("d-none")}if("clear-filters"==t.target.dataset.action){let t=document.querySelectorAll(".catalog-filter");t.forEach(t=>{t.querySelectorAll("input.filter-checkbox").forEach(t=>t.checked=!1),updateActiveFilterCount(t),updateVisibilityActiveFiltersWrap()})}if("clear-filter-group"==t.target.dataset.action&&clearFilterGroup(t.target.dataset.filterGroup),"clear-filter"==t.target.dataset.action&&toggleFilter(t.target.dataset.filterId),"toggle-password"==t.target.dataset.action&&(t.target.classList.toggle("is-active"),t.target.closest(".form-field").querySelector("input.form-field__password").type=t.target.classList.contains("is-active")?"text":"password"),"toggle-sizes"==t.target.dataset.action&&(t.target.closest(".cart-product").querySelector(".cart-product__sizes").classList.toggle("cart-product__sizes--show-all"),t.target.classList.toggle("is-active")),"cart-product-plus"==t.target.dataset.action){let e=t.target.closest(".cart-product-count").querySelector(".cart-product-count__input");e.value=parseInt(e.value.replace(/\D/gi,""))||0,e.value<999&&e.value++,updateCartProductSizeCount(t.target.closest(".cart-product-size"))}if("cart-product-minus"==t.target.dataset.action){let e=t.target.closest(".cart-product-count").querySelector(".cart-product-count__input");e.value=parseInt(e.value.replace(/\D/gi,""))||0,e.value>0&&e.value<=999&&e.value--,updateCartProductSizeCount(t.target.closest(".cart-product-size"))}if("cart-product-delete"==t.target.dataset.action){let e=t.target.closest(".cart-product");e.classList.add("is-loading"),e.classList.add("is-loading--opacity"),setTimeout(()=>{setTimeout(()=>{e.remove()},150),e.classList.add("is-loading--scaleY")},450)}}}),window.addEventListener("mouseover",t=>{if(t.target.classList.contains("card-color")){let e=t.target,a=e.closest(".product-card"),r=a.querySelectorAll(".card-color"),s=a.querySelectorAll(".card-size"),c=a.querySelector(".product-card__pic"),l=e.dataset.images?e.dataset.images.split(","):[];clearTimeout(swapImagesTimer),removeSwiper(a),setActiveColor(r,e,a,s),updateSrcset(c,e.dataset.colorId),updatePrices(a,e.dataset.priceActual,e.dataset.priceOld),updateLinks(a,e.dataset.colorId),l.length>1&&swapImages(c,l,1),e.addEventListener("mouseleave",()=>{clearTimeout(swapImagesTimer)}),a.addEventListener("mouseleave",()=>{setProductDefaultState(a)})}t.target.classList.contains("product-card__head-link")&&(productHoverTimer=setTimeout(()=>{setSwiper(t.target.closest(".product-card"));let e=t.target.closest(".product-card");e.addEventListener("mouseleave",()=>{clearTimeout(productHoverTimer),setProductDefaultState(e)})},250)),t.target.classList.contains("notice-card--active")&&t.target.classList.remove("notice-card--active")});const productPlaceholdersEl=document.querySelector(".product-cards--placeholder");if(productPlaceholdersEl){let t=productPlaceholdersEl.querySelectorAll(".product-card");if(t.length){const e=document.createDocumentFragment();for(let a=0;a<7-t.length;a++){let t=document.createElement("div");t.classList.add("product-card-placeholder"),e.appendChild(t)}productPlaceholdersEl.appendChild(e)}}const scrollToTopBtn=document.getElementById("scroll-to-top");if(scrollToTopBtn){let t;window.addEventListener("scroll",function(){t=window.scrollY/window.innerHeight,scrollToTopBtn.classList.toggle("is-active",t>1)})}const swiperRecentProducts=new Swiper(".js-swiper-recent-products",{loop:!1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:2,breakpoints:{320:{slidesPerView:2,spaceBetween:15},400:{slidesPerView:2.5,spaceBetween:15},575:{slidesPerView:3.5,spaceBetween:15},750:{slidesPerView:4.5,spaceBetween:20},1000:{slidesPerView:5,spaceBetween:20},1100:{slidesPerView:5.5,spaceBetween:25},1300:{slidesPerView:7,spaceBetween:25},1600:{slidesPerView:7,spaceBetween:30}}}),swiperMainSlider=new Swiper(".js-swiper-main-slider",{loop:!0,spaceBetween:0,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},a11y:{prevSlideMessage:"Назад",nextSlideMessage:"Вперёд"},autoplay:{delay:5e3},autoHeight:!0}),worktimeEl=document.getElementById("js-worktime");worktimeEl&&(getWorktimeStatus(worktimeEl),setInterval(()=>getWorktimeStatus(worktimeEl),2e3));